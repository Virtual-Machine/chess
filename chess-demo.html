<!DOCTYPE html>
<html>
	<head>
  		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  		<title> - Project - </title>
		
		<style>#board,#sidePanel{height:600px;padding:0}#bYourTurn,#pieceWindow{visibility:hidden}#pieceWindow,#sidePanel,.holder{text-align:center}body,html{height:100%;margin:0;background-color:#777;overflow-y:hidden}#board{width:600px;background-color:#1B5658}#sidePanel{position:absolute;left:620px;top:20px;width:300px;background-color:#5ac}.playerBlack{background-color:#111;color:#ddd;height:300px}.playerWhite{background-color:#ddd;color:#111;height:300px}#bYourTurn,#wYourTurn{color:#D6812D;font-size:20px}.container{padding-top:20px;position:relative;height:100%;max-width:1200px;margin:0 auto}.cell{float:left;width:12.5%;height:12.5%}.holder{width:100%;height:100%;font-size:40px;line-height:75px;z-index:5}.light{background-color:#649877}.white{color:#eee}.black{color:#111}#pieceWindow{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;width:200px;height:200px;background-color:#aaa;line-height:100px;border-radius:20px}.button{cursor:pointer;font-size:20px;background-color:#080;width:100px;margin-left:50px;margin-top:25px;line-height:50px;height:50px}.button:hover{background-color:#050;color:#777}.glow{background-color:rgba(153,181,97,.5)}.check{background-color:rgba(153,25,25,.5)}</style>
	</head>
	<body>
		<div class="container">
			<div id="board">
			</div>
			<div id="sidePanel">
			<div class="playerBlack">
				<br>
				<div>Black</div>
				<br>
				<label for="bName">Name: </label><input id='bName' type="text">
				<br>
				<br>
				<label for="bName">Piece Value: </label><span id="bPieceValue"></span>
				<br>
				<br>
				<span id="bYourTurn">Your Turn!</span>
			</div>
			<div class="playerWhite">
				<br>
				<div>White</div>
				<br>
				<label for="wName">Name: </label><input id='wName' type="text">
				<br>
				<br>
				<label for="wName">Piece Value: </label><span id="wPieceValue"></span>
				<br>
				<br>
				<span id="wYourTurn">Your Turn!</span>
			</div>
			</div>
		</div>
		<div id="pieceWindow">
			<label for="piece">Select Piece</label><select name="piece" id="pieceSelect">
				<option value="Knight">Knight</option>
				<option value="Bishop">Bishop</option>
				<option value="Rook">Rook</option>
				<option value="Queen">Queen</option>
			</select>
			<div class="button" onclick="submitValue()">OK</div>
		</div>
		
		<script>"use strict";function cellContents(t,e){return t[e]&&t[e].requestMove?t[e].color:null}function processEnPassant(t,e){var i=["a3","b3","c3","d3","e3","f3","g3","h3","a6","b6","c6","d6","e6","f6","g6","h6"],n=i.indexOf(e);n>=0&&8>n?(e=e[0]+4,t[e]=null,$("#"+e)[0].className="holder",$("#"+e)[0].innerHTML=""):n>=8&&16>n&&(e=e[0]+5,t[e]=null,$("#"+e)[0].className="holder",$("#"+e)[0].innerHTML="")}function cellsBetween(t,e,i){var n=[],r=["","a","b","c","d","e","f","g","h",""],s=getMovementShape(e,i),o=r.indexOf(e[0]),a=parseInt(e[1]),l=s[0],h=s[1];if(l>1||-1>l||h>1||-1>h){if(0===h)if(l>0)for(l;l>1;l--)n.push(r[++o]+a);else for(l;-1>l;l++)n.push(r[--o]+a);if(0===l)if(h>0)for(h;h>1;h--)n.push(r[o]+ ++a);else for(h;-1>h;h++)n.push(r[o]+--a);if(Math.abs(l)===Math.abs(h)){if(l>0&&h>0)for(l;l>1;l--)n.push(r[++o]+ ++a);if(0>l&&h>0)for(h;h>1;h--)n.push(r[--o]+ ++a);if(0>l&&0>h)for(l;-1>l;l++)n.push(r[--o]+--a);if(l>0&&0>h)for(l;l>1;l--)n.push(r[++o]+--a)}return n}return!1}function objectInCells(t,e){for(var i in e)if(t[e[i]]&&t[e[i]].requestMove)return!0;return!1}function getMovementShape(t,e){var i=["","a","b","c","d","e","f","g","h",""],n=t[0],r=parseInt(t[1]),s=e[0],o=parseInt(e[1]),a=i.indexOf(s)-i.indexOf(n),l=o-r;return[a,l]}function getCellInDirection(t,e){var i=["","a","b","c","d","e","f","g","h",""],n=t[0],r=parseInt(t[1]);if("N"===e&&(r+=1),"S"===e&&(r-=1),"W"===e){var s=i.indexOf(n);s-=1,n=i[s]}if("E"===e){var s=i.indexOf(n);s+=1,n=i[s]}if("NE"===e){var s=i.indexOf(n);s+=1,n=i[s],r+=1}if("SE"===e){var s=i.indexOf(n);s+=1,n=i[s],r-=1}if("NW"===e){var s=i.indexOf(n);s-=1,n=i[s],r+=1}if("SW"===e){var s=i.indexOf(n);s-=1,n=i[s],r-=1}return""===n||1>r||r>8?"Out Of Bounds":n+""+r}function idToPiece(t){if(null!=t){var e=t[0];switch(e="w"===e?"White":"Black",t=t[1]){case"♟":return new Pawn(e);case"♜":return new Rook(e);case"♞":return new Knight(e);case"♝":return new Bishop(e);case"♛":return new Queen(e);case"♚":return new King(e)}}}function mapToLetter(t){return letters[t]}function mapToValue(t){return letters.indexOf(t)}function getPieceAtCoords(t){if(positions[t]){var e=positions[t][1];return"w"==positions[t][0]?"<div id='"+t+"' class='holder white'>"+e+"</div>":"<div id='"+t+"' class='holder black'>"+e+"</div>"}return"<div id='"+t+"' class='holder'></div>"}function initializeMapping(){for(var t=0,e=8;e>0;e--)for(var i=1;9>i;i++)coordMap[t++]=mapToLetter(i)+""+e}function initializeBoard(){for(var t=0,e=!1,i=0;64>i;i++)++t>8&&(t=1,e=!e),e=!e,e?$("#board").append("<div class='cell light'>"+getPieceAtCoords(coordMap[i])+"</div>"):$("#board").append("<div class='cell'>"+getPieceAtCoords(coordMap[i])+"</div>")}function allowDrop(t){t.preventDefault()}function drag(t){t.dataTransfer.setData("piece",t.target.innerHTML),t.dataTransfer.setData("id",t.target.id),t.dataTransfer.setData("className",t.target.className)}function drop(t){t.preventDefault();var e=t.dataTransfer.getData("piece"),i=t.dataTransfer.getData("className"),n=t.dataTransfer.getData("id"),r=t.target.id,s=chessEngine.requestMove(n,r);if(s){t.target.className=i,$("#"+n)[0].className="holder",$("#"+n)[0].innerHTML="",t.target.innerHTML=e,chessEngine.grid[r]=chessEngine.grid[n],chessEngine.grid[n]=null,chessEngine.grid[r].moved=!0,chessEngine.upgradePawnCheck(),chessEngine.updatePoints();var o=chessEngine.searchForCheck();o[0]?($("#"+o[1]).addClass("check"),$("#"+o[2]).removeClass("check")):($("#"+o[1]).removeClass("check"),$("#"+o[2]).removeClass("check")),chessEngine.production&&chessEngine.changeHighlighting(n,r)}}function submitValue(){$("#pieceWindow").css("visibility","hidden");var t=$("#pieceSelect").val(),e=$("#pieceWindow").data("coords"),i=$("#pieceWindow").data("color");switch(t){case"Knight":$("#"+e)[0].innerHTML="♞",chessEngine.grid[e]=new Knight(i);break;case"Bishop":$("#"+e)[0].innerHTML="♝",chessEngine.grid[e]=new Bishop(i);break;case"Rook":$("#"+e)[0].innerHTML="♜",chessEngine.grid[e]=new Rook(i);break;case"Queen":$("#"+e)[0].innerHTML="♛",chessEngine.grid[e]=new Queen(i)}var n=chessEngine.searchForCheck();n[0]?($("#"+n[1]).addClass("check"),$("#"+n[2]).removeClass("check")):($("#"+n[1]).removeClass("check"),$("#"+n[2]).removeClass("check")),chessEngine.pause=!1,chessEngine.whiteTurn?$("#wYourTurn").css("visibility","visible"):$("#bYourTurn").css("visibility","visible")}!function(t,e){var i=e(t);"object"==typeof module&&"object"==typeof exports?module.exports=i:("function"==typeof define?define("jqlite",function(){return i}):"function"==typeof angular?angular.module("jqlite",[]).constant("jqlite",i):t.jqlite=i,t.$||(t.$=i))}(this,function(t,e){function i(t){return function(e){return typeof e===t}}function n(t){return function(e){return e instanceof t}}function r(){for(var t,e=S.call(arguments),i=S.call(arguments);i;){if(typeof e!=typeof i&&(e=C(i)?[]:m(i)?{}:i),m(i))for(t in i)void 0!==i[t]&&(typeof e[t]!=typeof i[t]?e[t]=r(void 0,i[t]):C(e[t])?[].push.apply(e[t],i[t]):m(e[t])?e[t]=r(e[t],i[t]):e[t]=i[t]);i=S.call(arguments)}return e}function s(){for(var t,e=S.call(arguments),i=S.call(arguments);i;){for(t in i)e[t]=i[t];i=S.call(arguments)}return e}function o(t,e,i){if(void 0!==i){if(t.$jqListeners&&t.$jqListeners[e]){var n=L(t.$jqListeners[e],function(t){return t.srcListener===i});n.found&&(t.$jqListeners[e].splice(n.index,1),A(t,e,n.found))}}else if(t.$jqListeners&&t.$jqListeners[e]){for(var r=0,s=t.$jqListeners[e].length;s>r;r++)A(t,e,t.$jqListeners[e][r]);t.$jqListeners[e]=[]}}function a(t,e,i,n){var r=n?function(n){i.apply(t,[n].concat(n.args)),o(t,e,i)}:function(e){i.apply(t,[e].concat(e.args))};r.srcListener=i,t.$jqListeners=t.$jqListeners||{},t.$jqListeners[e]=t.$jqListeners[e]||[],t.$jqListeners[e].push(r),P(t,e,r)}function l(t,e){for(var i=0,n=e.length;n>i;i++)t[i]=e[i];return t.length+=n,t}function h(t,e){var i=t[0];if("<"===i){N.innerHTML=t;var n=l(new p,N.children);return n}if(-1!==t.indexOf(" ")||-1!==t.indexOf(":"))return l(new p,e.querySelectorAll(t));if("#"===i){var r=e.getElementById(t.substr(1));if(r){var s=new p;return s[0]=r,s.length=1,s}return l(new p,e.querySelectorAll(t))}return"."===i?l(new p,e.getElementsByClassName(t.substr(1))):B.test(t)?l(new p,e.getElementsByTagName(t)):l(new p,e.querySelectorAll(t))}function f(t){if(t instanceof p)return t;if(C(t)||t instanceof NodeList||t instanceof HTMLCollection)return l(new p,t);if(t===window||t===document||t instanceof HTMLElement||t instanceof Element||x(t)){var e=new p;return e[0]=t,e.length=1,e}if(b(t))c(t);else if(void 0===t)return new p}function u(t,e){return w(t)?h(t,e||document):f(t)}function c(t){b(t)&&(/loaded|complete/.test(document.readyState)?t():H(t))}function p(){}function d(t){if(t.length<=1)return t;for(var e=t.filter(function(){return this.___found___?!1:(this.___found___=!0,!0)}),i=0,n=e.length;n>i;i++)delete e[i].___found___;return e}function v(t,e,i){return e&&(e.previousElementSibling&&(i=v(t,e.previousElementSibling,i)),t[i++]=e),i}function g(t,e,i,n,r){"string"==typeof i&&(i=g.times[i]),n=n||"linear";for(var s=e?0:1,o=e?1:0,a=0,l=t.length;l>a;a++)t[a].style.opacity=s;return setTimeout(function(){for(var e=0,r=t.length;r>e;e++)t[e].$jqliteTransition=void 0===t[e].$jqliteTransition?t[e].style[F]||"":t[e].$jqliteTransition,t[e].style[F]="opacity "+i+"ms "+n,t[e].style.opacity=o},20),setTimeout(function(){for(var e=0,i=t.length;i>e;e++)t[e].style.opacity="",t[e].style[F]=t[e].$jqliteTransition;r.call(t)},i),t}function y(t,e,i,n){var r,s;if("string"==typeof e)if(/\s/.test(e))e=e.split(/\s+/g);else{if(!b(i))throw"listener needs to be a function";for(r=0,s=t.length;s>r;r++)a(t[r],e,i,n)}if(C(e))for(r=0,s=e.length;s>r;r++)y(t,e[r],i,n);else if(m(e))for(r in e)y(t,r,e[r],n);return t}var m=i("object"),b=i("function"),w=i("string"),E=i("number"),$=i("boolean"),C=Array.isArray||n(Array),M=n(Date),T=n(RegExp),x=function(t){return t&&1===t.nodeType},L=function(t,e){if(!(e instanceof Function)){var i=e;e=function(t){return t===i}}for(var n=0,r=t.length;r>n;n++)if(e(t[n]))return{index:n,found:t[n]};return{index:-1}},S=Array.prototype.shift;Element.prototype.matchesSelector||(Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector);var q=document.createEvent?function(t,e,i,n){var r=document.createEvent("HTMLEvents");return r.data=n,r.args=i,r.initEvent(e,!0,!0),t.dispatchEvent(r),r}:function(t,e,i,n){var r=document.createEventObject();return r.data=n,r.args=i,t.fireEvent("on"+e,r),r},D=eval,O=function(){},N=document.createElement("div"),k=document.createElement("div"),j=!!N.classList;if(!N.addEventListener&&!document.body.attachEvent)throw"Browser not compatible with element events";var P=N.addEventListener?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)},A=N.removeEventListener?function(t,e,i){return t.removeEventListener(e,i,!1)}:function(t,e,i){return t.detachEvent("on"+e,i)},B=/^[a-z-_]$/i;u.noop=O,u.extend=function(t){var e=[].slice.call(arguments);$(t)?e.shift():t=!1,t?r.apply(null,e):s.apply(null,e)},u.isObject=m,u.isFunction=b,u.isString=w,u.isNumber=E,u.isBoolean=$,u.isArray=C,u.isDate=M,u.isRegExp=T,u.isElement=x;var W=u,H=window.addEventListener?function(t){window.addEventListener("load",t,!1)}:function(t){window.attachEvent("onload",t)};p.prototype=[],p.prototype.ready=c,p.prototype.extend=function(t){var e=[].slice.call(arguments);$(t)?e.shift():t=!1,t?r.apply(null,[p.prototype].concat(e)):s.apply(null,[p.prototype].concat(e))},u.fn=p.prototype,p.prototype.get=function(t){return t?this[t]:this},p.prototype.eq=function(t){if(!E(t))throw"number required";var e=0>t?this[this.length-t]:this[t],i=new p;return e&&(i[0]=e,i.length=1),i},p.prototype.first=function(){var t=new p;return this.length&&(t[0]=this[0],t.length=1),t},p.prototype.last=function(){var t=new p;return this.length&&(t[0]=this[this.length-1],t.length=1),t},p.prototype.find=function(t){var e,i,n,r,s,o=this,a=new p,l=0;if(!t)return o;for(/^\s*>/.test(t)&&(t=t.replace(/^\s*>\s*([^\s]*)\s*/,function(t,e){return o=o.children(e),""})),e=0,n=o.length;n>e;e++)for(s=o[e].querySelectorAll(t),i=0,r=s.length;r>i;i++)a[l++]=s[i];return a.length=l,d(a)},p.prototype.$=p.prototype.find,p.prototype.add=function(t,e){var i,n,r=u(t,e),s=this.length,o=new p;for(i=0,n=this.length;n>i;i++)o[i]=this[i];for(i=0,n=r.length;n>i;i++)o[s++]=r[i];return o.length=s,d(o)},p.prototype.each=function(t){if(b(t))for(var e=0,i=this.length;i>e;e++)t.call(this[e],e,this[e]);return this},p.prototype.empty=function(){for(var t,e,i=0,n=this.length;n>i;i++)for(t=this[i],e=t.firstChild;e;)t.removeChild(e),e=t.firstChild;return this},p.prototype.filter=function(t){var e,i,n,r=new p;if(b(t))for(i=0,n=this.length,e;n>i;i++)e=this[i],t.call(e,i,e)&&r.push(e);else if(w(t))for(i=0,n=this.length,e;n>i;i++)e=this[i],Element.prototype.matchesSelector.call(e,t)&&r.push(e);return r};var I=N.closest?function(t,e){return t.closest(e)}:function(t,e){for(var i=t.parentElement;i;){if(i.matchesSelector(e))return i;i=i.parentElement}return null};p.prototype.closest=function(t){var e,i=new p,n=0;if(!t)return this;for(var r=0,s=this.length;s>r;r++)e=I(this[r],t),e&&(i[n++]=e);return i.length=n,d(i)},p.prototype.children=N.children?function(t){for(var e=new p,i=0,n=this.length;n>i;i++)l(e,this[i].children);return t?e.filter(t):e}:function(t){var e=new p;return Array.prototype.forEach.call(this,function(t){for(t=t.firstElementChild||t.firstChild;t;)e[e.length]=t,t=t.nextElementSibling||t.nextSibling}),t?e.filter(t):e},p.prototype.parent=function(t){for(var e=new p,i=0,n=0,r=this.length;r>n;n++)this[n].parentElement&&(e[i++]=this[n].parentElement);return e.length=i,d(t?e.filter(t):e)},p.prototype.contents=function(t){var e=new p;return Array.prototype.forEach.call(this,function(t){for(t=t.firstChild;t;)e[e.length]=t,t=t.nextSibling}),t?e.filter(t):e},p.prototype.clone=function(t,e){var i,n,r=new p;for(t=void 0===t||t,i=0,n=this.length;n>i;i++)r[i]=this[i].cloneNode(t);return r.length=n,r},p.prototype.data=function(t,e){if(!this.length)return e?this:void 0;if(void 0===e){var i=this[0].$jqliteData&&this[0].$jqliteData[t];return void 0===i?(i=this.dataset(t),void 0===i?void 0:"{"===i.charAt(0)||"["===i.charAt(0)?JSON.parse(i):/^\d+$/.test(i)?Number(i):i):i}for(var n=0,r=this.length;r>n;n++)this[n].$jqliteData=this[n].$jqliteData||{},this[n].$jqliteData[t]=e},p.prototype.removeData=function(t){for(var e=0,i=this.length;i>e;e++)this[e].$jqliteData&&this[e].$jqliteData[t]&&delete this[e].$jqliteData[t];return this},p.prototype.dataset=N.dataset?function(t,e){var i,n;if(void 0===e)return void 0===t?this[0]?this[0].dataset:{}:(this[0]||{}).dataset[t];for(i=0,n=this.length;n>i;i++)this[i].dataset[t]=e;return this}:function(t,e){var i,n;if(void 0===e){var r=[];for(i=0,n=this.length;n>i;i++)r.push(this[i].getAttribute("data-"+t));return(this[0]||{getAttribute:function(){return!1}}).getAttribute(t)}for(i=0,n=this.length;n>i;i++)this[i].setAttribute("data-"+t,e)},p.prototype.removeDataset=N.dataset?function(t){var e,i;if("string"==typeof t)for(e=0,i=this.length;i>e;e++)delete this[e].dataset[t];else if(C(t))for(e=0,i=t.length;i>e;e++)this.removeData(t[e]);return this}:function(t){var e,i;if("string"==typeof t)for(e=0,i=this.length;i>e;e++)this[e].removeAttribute("data-"+t);else if(C(t))for(e=0,i=t.length;i>e;e++)this.removeData(t[e]);return this},p.prototype.attr=function(t,e){var i,n;if(b(e))for(i=0,n=this.length;n>i;i++)this[i].setAttribute(t,e(i,this[i].getAttribute(t)));else if(void 0!==e)for(i=0,n=this.length;n>i;i++)this[i].setAttribute(t,e);else if(this[0])return this[0].getAttribute(t);return this},p.prototype.removeAttr=function(t){for(var e=0,i=this.length;i>e;e++)this[e].removeAttribute(t);return this},p.prototype.prop=function(t,e){var i,n;if(b(e))for(i=0,n=this.length;n>i;i++)this[i][t]=e(i,this[i][t]);else if(void 0!==e)for(i=0,n=this.length;n>i;i++)this[i][t]=e;else if(this[0])return this[0][t];return this},p.prototype.val=function(t){var e;if(void 0===t)return e=this[0],"select"===e.nodeName?e.options[e.selectedIndex].value:this[0].value||this[0].getAttribute("value");for(var i=0,n=this.length;n>i;i++)if("select"===this[i].nodeName){e=this[i];for(var r=0,s=e.options.length;s>r;r++)if(e.options[r].value===t){e.options[r].selected=!0;break}}else void 0!==this[i].value?this[i].value=t:this[i].setAttribute("value",t);return this},p.prototype.addClass=j?function(t){if(t.indexOf(" ")>=0){var e=this;t.split(" ").forEach(function(t){e.addClass(t)})}else for(var i=0,n=this.length;n>i;i++)this[i].classList.add(t);return this}:function(t){for(var e=new RegExp("\\b"+(t||"")+"\\b",""),i=0,n=this.length;n>i;i++)this[i].className=this[i].className.replace(e,"")+" "+t;return this},p.prototype.removeClass=j?function(t){if(t.indexOf(" ")>=0){var e=W(this);t.split(" ").forEach(function(t){e.removeClass(t)})}else for(var i=0,n=this.length;n>i;i++)this[i].classList.remove(t);return this}:function(t){for(var e=new RegExp("(\\b|\\s+)"+t+"\\b","g"),i=0,n=this.length;n>i;i++)this[i].className=this[i].className.replace(e,"");return this},p.prototype.hasClass=j?function(t){for(var e=0,i=this.length;i>e;e++)if(this[e].classList.contains(t))return!0;return!1}:function(t){for(var e=new RegExp("\\b"+(t||"")+"\\b",""),i=0,n=this.length;n>i;i++)if(e.test(this[i].className))return!0;return!1},p.prototype.toggleClass=j?function(t,e){var i,n;if(void 0===e)for(i=0,n=this.length;n>i;i++)this[i].classList.item(t)?this[i].classList.remove(t):this[i].classList.add(t);else if(e)for(i=0,n=this.length;n>i;i++)this[i].classList.add(t);else for(i=0,n=this.length;n>i;i++)this[i].classList.remove(t);return this}:function(t,e){var i,n,r=new RegExp("\\b"+(t||"")+"\\b",""),s=new RegExp("\\b"+(t||"")+"\\b",""),o=new RegExp("(\\b|\\s+)"+t+"\\b","g");if(void 0===t)for(i=0,n=this.length;n>i;i++)r.test(this[i].className)?this[i].className=this[i].className.replace(o,""):this[i].className=this[i].className.replace(s,"")+" "+t;else if(e)for(i=0,n=this.length;n>i;i++)this[i].className=this[i].className.replace(s,"")+" "+t;else for(i=0,n=this.length;n>i;i++)this[i].className=this[i].className.replace(o,"");return this},p.prototype.append=function(t){var e,i,n,r,s,o,a=W(t);for(a.remove(),i=0,r=this.length;r>i;i++)for(e=i?a.clone(!0):a,o=this[i],n=0,s=e.length;s>n;n++)o.appendChild(e[n]);return this},p.prototype.appendTo=function(t){W(t).append(this)},p.prototype.prepend=function(t){var e,i,n,r,s,o,a,l=W(t);for(l.remove(),i=0,r=this.length;r>i;i++)if(e=i?l.clone(!0):l,o=this[i],a=o.firstChild)for(n=0,s=e.length;s>n;n++)o.insertBefore(e[n],a);else for(n=0,s=e.length;s>n;n++)o.appendChild(e[n]);return this},p.prototype.after=function(t){var e,i,n,r,s,o,a,l=W(t);for(l.remove(),i=0,r=this.length;r>i;i++)if(e=i?l.clone(!0):l,a=this[i].parentElement||this[i].parentNode,o=this[i].nextElementSibling||this[i].nextSibling)for(n=0,s=e.length;s>n;n++)a.insertBefore(e[n],o),o=e[n];else for(n=0,s=e.length;s>n;n++)a.appendChild(e[n]);return this},p.prototype.replaceWith=function(t){var e,i,n,r,s,o,a,l=W(t);if(!l.length)return this;for(i=this.length-1;i>=0;i--)if(e=i?l.clone(!0):l,s=this[i],o=s.parentElement,o.replaceChild(e[0],s),e[1])if(a=e[0].nextElementSibling)for(n=1,r=e.length;r>n;n++)o.insertBefore(e[n],a);else for(n=1,r=e.length;r>n;n++)o.appendChild(e[n]);return this},p.prototype.wrap=function(t){var e=b(t)?function(e){return W(t(e))}:function(){var e=W(t),i=e.clone(!0);return function(t){return t?i.clone(!0):e}}();return this.each(function(t,i){for(var n=e(t)[0],r=this.parentElement,s=n;s.firstElementChild;)s=s.firstElementChild;r.replaceChild(n,this),s.appendChild(this)}),this},p.prototype.wrapAll=function(t){var e=W(b(t)?t():t)[0],i=this[0].parentElement;if(i.replaceChild(e,this[0]),e)for(;e.firstElementChild;)e=e.firstElementChild;for(var n=0,r=this.length;r>n;n++)e.appendChild(this[n]);return W(e)},p.prototype.unwrap=function(){for(var t,e=this.parent(),i=0,n=e.length;n>i;i++)t=e.eq(i),t.replaceWith(t.children());return this},p.prototype.next=function(t){for(var e,i=new p,n=0,r=0,s=this.length;s>r;r++)e=this[r].nextElementSibling,e&&(i[n++]=e);return i.length=n,"string"==typeof t?i.filter(t):i},p.prototype.nextAll=function(t){for(var e,i=new p,n=0,r=0,s=this.length;s>r;r++)for(e=this[r].nextElementSibling;e;)i[n++]=e,e=e.nextElementSibling;return i.length=n,d(t?i.filter(t):i)},p.prototype.prev=function(t){for(var e,i=new p,n=0,r=0,s=this.length;s>r;r++)e=this[r].previousElementSibling,e&&(i[n++]=e);return i.length=n,t?i.filter(t):i},p.prototype.prevAll=function(t){for(var e=new p,i=0,n=0,r=this.length;r>n;n++)i=v(e,this[n].previousElementSibling,i);return e.length=i,d(t?e.filter(t):e)},p.prototype.remove=function(t){for(var e,i=t?this.filter(t):this,n=0,r=i.length;r>n;n++)e=i[n].parentElement||i[n].parentNode,e&&e.removeChild(i[n]);return this},p.prototype.detach=function(t){for(var e=t?this.filter(t):this,i=new p,n=0,r=e.length;r>n;n++)k.appendChild(e[n]),i.push(e[n]);return i},p.prototype.css=function(t,e){if(void 0!==e){var i,n;if(e=e instanceof Function?e():e instanceof Number?e+"px":e,"string"==typeof e&&/^\+=|\-=/.test(e))for(e="-"===e.charAt(0)?-parseFloat(e.substr(2)):parseFloat(e.substr(2)),i=0,n=this.length;n>i;i++)this[i].style[t]=parseFloat(this[i].style[t])+e+"px";else for(i=0,n=this.length;n>i;i++)this[i].style[t]=e;return this}if(t instanceof Object)for(var r in t)this.css(r,t[r]);else if(this[0])return this[0].style[t]||window.getComputedStyle(this[0])[t];return this};var F=void 0!==N.style.webkitTransition?"webkitTransition":void 0!==N.style.mozTransition?"mozTransition":void 0!==N.style.msTransition?"msTransition":void 0;g.times={slow:600,normal:400,fast:200},p.prototype.show=function(t,e,i){if(t){var n=this;return this.show(),g(n,!0,t,e,i||function(){})}for(var r=0,s=this.length;s>r;r++)this[r].style.display&&(this[r].style.display="");return this},p.prototype.hide=function(t,e,i){if(t)return g(this,!1,t,e,function(){this.hide(),i&&i.call(this)});for(var n=0,r=this.length;r>n;n++)this[n].style.display="none";return this},p.prototype.position=function(){return this.length?{top:this[0].offsetTop,left:this[0].offsetLeft}:void 0},p.prototype.offset=function(t){if(void 0===t){var e=this[0].getBoundingClientRect();return this.length&&{top:e.top+document.body.scrollTop,left:e.left}}if(t instanceof Function&&(t=t()),"object"==typeof t&&void 0!==t.top&&void 0!==t.left){for(var i=0,n=this.length;n>i;i++){this[i].style.position="relative";var r=this[i].getBoundingClientRect();this[i].style.top=t.top-r.top+parseFloat(this[i].style.top||0)-document.body.scrollTop+"px",this[i].style.left=t.left-r.left+parseFloat(this[i].style.left||0)+"px"}return t}},p.prototype.width=function(t,e){var i;if(t===!0){if(this.length)return i=this[0],i.offsetWidth}else if(void 0!==t)for(var n=0,r=this.length;r>n;n++)this[n].style.width=t;else if(this.length)return i=this[0],i.offsetWidth-parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-left-width"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-right"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-right-width"))},p.prototype.height=function(t,e){var i;if(t===!0){if(this.length)return i=this[0],i.offsetHeight}else if(void 0!==t)for(var n=0,r=this.length;r>n;n++)this[n].style.height=t;else if(this.length)return i=this[0],i.offsetHeight-parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-top-width"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("padding-bottom"))-parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-bottom-width"))},p.prototype.html=function(t){var e,i;if(void 0===t){for(t="",e=0,i=this.length;i>e;e++)t+=this[e].innerHTML;return t}if(t===!0){for(t="",e=0,i=this.length;i>e;e++)t+=this[e].outerHTML;return t}if(b(t)){for(e=0,i=this.length;i>e;e++)this[e].innerHTML=t(e,this[e].innerHTML);return this}for(e=0,i=this.length;i>e;e++)this[e].innerHTML=t;return this.find("script").each(function(){if(("text/javascript"==this.type||!this.type)&&this.textContent)try{D("(function(){ 'use strict';"+this.textContent+"})();")}catch(t){throw new Error(t.message)}}),this},p.prototype.text=function(t){var e,i;if(void 0===t){for(t="",e=0,i=this.length;i>e;e++)t+=this[e].textContent;return t}if(b(t)){for(e=0,i=this.length;i>e;e++)this[e].textContent=t(e,this[e].textContent);return this}for(e=0,i=this.length;i>e;e++)this[e].textContent=t;return this},p.prototype.on=function(t,e){return y(this,t,e)};var _={list:["click","focus","blur","submit"],define:function(t){p.prototype[t]=function(e){if(e)this.on(t,e);else for(var i=0,n=this.length;n>i;i++)this[i][t]();return this}},init:function(){for(var t=0,e=_.list.length;e>t;t++)_.define(_.list[t])}};return _.init(),p.prototype.once=function(t,e){return y(this,t,e,!0)},p.prototype.one=p.prototype.once,p.prototype.off=function(t,e){var i,n;if(/\s/.test(t)&&(t=t.split(/\s+/g)),t instanceof Array){for(i=0,n=this.length;n>i;i++)this.off(t[i],e);return this}if(void 0===t){var r,s;for(i=0,n=this.length;n>i;i++){r=this[i].$jqListeners||{};for(s in r)o(this[i],s),delete r[s]}}else if("string"!=typeof t||!b(e)&&void 0!==e)throw"bad arguments";for(i=0,n=this.length;n>i;i++)o(this[i],t,e);return this},p.prototype.trigger=function(t,e,i){if("string"!=typeof t)throw"bad arguments";for(var n=0,r=this.length;r>n;n++)q(this[n],t,e,i);return this},p.prototype.stopPropagation=function(){for(var t=0,e=arguments.length;e>t;t++)this.on(arguments[t],function(t){t.stopPropagation()})},["mouseenter","mouseleave"].forEach(function(t){p.prototype[t]=function(e){return this.on(t,e),this}}),p.prototype.hover=function(t,e){return this.mouseenter(t).mouseleave(e)},u.noConflict=function(){return t.$===u&&delete t.$,u},u});class Piece{constructor(t){this.color=t}requestMove(t,e,i){if(t[i]){if(t[i].requestMove){if(t[i].color==this.color){return false}}}return true}}class Pawn extends Piece{constructor(t){super(t);if(t=="White"){this.possibleMoves=["0,1","0,2","-1,1","1,1"]}else{this.possibleMoves=["0,-1","0,-2","-1,-1","1,-1"]}this.possibleDestinations;this.moved=false;this.value=1}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}var n=false;var r=false;if(t[i]){if(t[i].requestMove&&t[i].color!==this.color){n=true}if(this.color==="Black"){if(t[i]==="EnPassantWhite"){r=true}}if(this.color==="White"){if(t[i]==="EnPassantBlack"){r=true}}}var s=getMovementShape(e,i);var o=this.possibleMoves.indexOf(s.toString());if(o<0){return false}if(o===0){if(n){return false}else{return true}}if(o===2||o===3){if(n){return true}else if(r){processEnPassant(t,i);return true}else{return false}}if(o===1){if(this.moved){return false}if(n){return false}var a=cellsBetween(t,e,i);if(a){if(objectInCells(t,a)){return false}else{t[a[0]]="EnPassant"+this.color;return true}}}}buildMoveList(t,e){var i=[];var n;if(this.color==="White"){n=getCellInDirection(e,"NW");if(n!=="Out Of Bounds"){i.push(n)}n=getCellInDirection(e,"NE");if(n!=="Out Of Bounds"){i.push(n)}}else{n=getCellInDirection(e,"SW");if(n!=="Out Of Bounds"){i.push(n)}n=getCellInDirection(e,"SE");if(n!=="Out Of Bounds"){i.push(n)}}this.possibleDestinations=i}}class Rook extends Piece{constructor(t){super(t);this.moved=false;this.value=5;this.possibleDestinations=[]}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}this.buildMoveList(t,e);if(this.possibleDestinations.indexOf(i)>=0){return true}else{return false}}buildMoveList(t,e){var i=[];var n;var r=e;var s=["N","E","S","W"];for(var o=0;o<4;o++){r=e;for(var a=1;a<8;a++){n=getCellInDirection(r,s[o]);if(n==="Out Of Bounds"){r=e;break}var l=cellContents(t,n);if(l){if(l===this.color){r=e;break}else{i.push(n);r=e;break}}else{i.push(n);r=n}}}this.possibleDestinations=i}}class Knight extends Piece{constructor(t){super(t);this.possibleMoves=["2,1","1,2","2,-1","-1,2","-2,1","1,-2","-2,-1","-1,-2"];this.possibleDestinations;this.value=3}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}var n=getMovementShape(e,i);var r=this.possibleMoves.indexOf(n.toString());if(r>=0&&r<8){return true}else{return false}}buildMoveList(t,e){var i=["","a","b","c","d","e","f","g","h",""];var n=[];var r=i.indexOf(e[0]);var s=parseInt(e[1]);for(var o in this.possibleMoves){var a=parseInt(this.possibleMoves[o].split(",")[0]);var l=parseInt(this.possibleMoves[o].split(",")[1]);var h=r+a;var f=s+l;if(h<1||h>8||f<1||f>8){}else{n.push(i[h]+f)}}this.possibleDestinations=n}}class Bishop extends Piece{constructor(t){super(t);this.moved=false;this.value=3;this.possibleDestinations=[]}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}this.buildMoveList(t,e);if(this.possibleDestinations.indexOf(i)>=0){return true}else{return false}}buildMoveList(t,e){var i=[];var n;var r=e;var s=["NW","NE","SE","SW"];for(var o=0;o<4;o++){r=e;for(var a=1;a<8;a++){n=getCellInDirection(r,s[o]);if(n==="Out Of Bounds"){r=e;break}var l=cellContents(t,n);if(l){if(l===this.color){r=e;break}else{i.push(n);r=e;break}}else{i.push(n);r=n}}}this.possibleDestinations=i}}class Queen extends Piece{constructor(t){super(t);this.value=9;this.possibleDestinations=[]}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}this.buildMoveList(t,e);if(this.possibleDestinations.indexOf(i)>=0){return true}else{return false}}buildMoveList(t,e){var i=[];var n;var r=e;var s=["W","NW","N","NE","E","SE","S","SW"];for(var o=0;o<8;o++){r=e;for(var a=1;a<8;a++){n=getCellInDirection(r,s[o]);if(n==="Out Of Bounds"){r=e;break}var l=cellContents(t,n);if(l){if(l===this.color){r=e;break}else{i.push(n);r=e;break}}else{i.push(n);r=n}}}this.possibleDestinations=i}}class King extends Piece{constructor(t){super(t);this.possibleMoves=["1,1","1,0","1,-1","0,-1","0,0","0,1","-1,1","-1,0","-1,-1"];this.moved=false;this.checked=false;this.value=0}requestMove(t,e,i){if(!super.requestMove(t,e,i)){return false}var n=getMovementShape(e,i);var r=this.possibleMoves.indexOf(n.toString());if(r>=0&&r<8){return true}else{return false}}buildMoveList(t,e){return}}var coordMap=[],letters=["","a","b","c","d","e","f","g","h"],positions={a2:"w♟1",b2:"w♟2",c2:"w♟3",d2:"w♟4",e2:"w♟5",f2:"w♟6",g2:"w♟7",h2:"w♟8",a1:"w♜1",b1:"w♞1",c1:"w♝1",d1:"w♛",e1:"w♚",f1:"w♝2",g1:"w♞2",h1:"w♜2",a7:"b♟1",b7:"b♟2",c7:"b♟3",d7:"b♟4",e7:"b♟5",f7:"b♟6",g7:"b♟7",h7:"b♟8",a8:"b♜1",b8:"b♞1",c8:"b♝1",d8:"b♛",e8:"b♚",f8:"b♝2",g8:"b♞2",h8:"b♜2"};class ChessEngine{constructor(t){this.grid={};this.whiteTurn=true;this.production=t;this.pause=false;this.lastMove=null;this.check=false}initializeGrid(){for(var t=1;t<9;t++){for(var e=1;e<9;e++){this.grid[mapToLetter(t)+e]=idToPiece(positions[mapToLetter(t)+e])}}this.updatePoints()}showGrid(){console.log(this.grid)}requestMove(t,e){if(this.grid[t]&&!this.pause){var i=this.grid[t];var n=this.grid[e];this.grid[t]=null;this.grid[e]=i;var r=this.searchForCheck();this.grid[t]=i;this.grid[e]=n;if(r[0]===true&&r[3]===i.color||r[3]==="Illegal"){return false}if(this.grid[t].requestMove){if(this.grid[t].color==="Black"&&!this.whiteTurn||this.grid[t].color==="White"&&this.whiteTurn){var s=this.grid[t].requestMove(this.grid,t,e);if(s){if(this.production){if(this.whiteTurn){$("#wYourTurn").css("visibility","hidden");$("#bYourTurn").css("visibility","visible");this.removePassants("Black")}else{$("#wYourTurn").css("visibility","visible");$("#bYourTurn").css("visibility","hidden");this.removePassants("White")}this.whiteTurn=!this.whiteTurn}return true}else{return false}}}else{return false}}else{return false}}removePassants(t){for(var e in this.grid){if(this.grid[e]==="EnPassant"+t){this.grid[e]=null}}}changeHighlighting(t,e){if(this.lastMove){var i=this.lastMove[0];var n=this.lastMove[1];$("#"+i).removeClass("glow");$("#"+n).removeClass("glow")}this.lastMove=[t,e];$("#"+t).addClass("glow");$("#"+e).addClass("glow")}upgradePawnCheck(){this.pause=true;var t=["a1","b1","c1","d1","e1","f1","g1","h1","a8","b8","c8","d8","e8","f8","g8","h8"];for(var e in t){var i=this.grid[t[e]];if(i instanceof Pawn){$("#wYourTurn").css("visibility","hidden");$("#bYourTurn").css("visibility","hidden");$("#pieceWindow").css("visibility","visible");$("#pieceWindow").data("coords",t[e]);$("#pieceWindow").data("color",i.color);return}}this.pause=false}updatePoints(){var t=0;var e=0;for(var i in this.grid){if(this.grid[i]){if(this.grid[i].color){if(this.grid[i].color=="Black"){t+=this.grid[i].value}if(this.grid[i].color=="White"){e+=this.grid[i].value}}}}$("#bPieceValue")[0].innerHTML=t;$("#wPieceValue")[0].innerHTML=e}searchForCheck(){var t=[];var e;var i=[];var n;for(var r in this.grid){if(this.grid[r]){if(this.grid[r].color){this.grid[r].buildMoveList(this.grid,r);if(this.grid[r].color==="White"){for(var s in this.grid[r].possibleDestinations){i.push(this.grid[r].possibleDestinations[s])}if(this.grid[r]instanceof King){n=r}}else{for(var s in this.grid[r].possibleDestinations){t.push(this.grid[r].possibleDestinations[s])}if(this.grid[r]instanceof King){e=r}}}}}if(i.indexOf(e)>=0){if(t.indexOf(n)>=0){return[false,n,e,"Illegal"]}return[true,e,n,"Black"]}if(t.indexOf(n)>=0){return[true,n,e,"White"]}return[false,n,e]}flagCell(t,e){this.grid[t]="EnPassant"+e}unflagCell(t){this.grid[t]=null}movePiece(t,e){var i=this.grid[t];this.grid[e]=i;this.grid[t]=null}}var chessEngine=new ChessEngine(!0);chessEngine.initializeGrid(),initializeMapping(),initializeBoard();var cellholders=$(".holder");for(var i in cellholders)64>i&&(cellholders[i].draggable=!0,cellholders[i].ondrop=drop,cellholders[i].ondragover=allowDrop,cellholders[i].ondragstart=drag);</script>
		 
  	</body>
</html>